{"ast":null,"code":"import React,{useEffect,useMemo}from'react';import{Routes,Route,useLocation}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Box,ThemeProvider,CssBaseline}from'@mui/material';import MainLayout from'./components/layouts/MainLayout';import Dashboard from'./pages/Dashboard';import ComponentView from'./pages/ComponentView';import SettingsPage from'./pages/SettingsPage';import BudgetPage from'./pages/BudgetPage';import{connectWebSocket}from'./services/websocketService';import{setComponents}from'./store/slices/componentsSlice';import{createDarkTheme}from'./themes/darkTheme';import{createLightTheme}from'./themes/lightTheme';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const dispatch=useDispatch();const location=useLocation();const connectionStatus=useSelector(state=>state.websocket.status);const settings=useSelector(state=>state.settings);// Create dynamic theme based on user settings\nconst theme=useMemo(()=>{if(settings.theme==='light'){return createLightTheme(settings);}return createDarkTheme(settings);},[settings.theme,settings.headerColor,settings.footerColor,settings.backgroundColor,settings.sidebarColor,settings.paperColor,settings.textPrimaryColor,settings.textSecondaryColor,settings.componentsThemeColor]);useEffect(()=>{// Connect to WebSocket server\nconst socket=connectWebSocket();// Listen for component list updates\nsocket.on('component_list',data=>{dispatch(setComponents(data));});return()=>{// Disconnect WebSocket when component unmounts\nsocket.disconnect();};},[dispatch]);// Apply component GUI theme by sending a message to component iframes\nuseEffect(()=>{const componentIframes=document.querySelectorAll('iframe[src^=\"/component\"]');componentIframes.forEach(iframe=>{if(iframe.contentWindow){iframe.contentWindow.postMessage({type:'TEKTON_THEME_UPDATE',theme:settings.theme,colors:{headerColor:settings.headerColor,footerColor:settings.footerColor,backgroundColor:settings.backgroundColor,componentsThemeColor:settings.componentsThemeColor,textPrimaryColor:settings.textPrimaryColor,textSecondaryColor:settings.textSecondaryColor}},'*');}});},[settings.theme,settings.headerColor,settings.footerColor,settings.backgroundColor,settings.componentsThemeColor,settings.textPrimaryColor,settings.textSecondaryColor]);return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',height:'100vh'},children:/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/component/:id\",element:/*#__PURE__*/_jsx(ComponentView,{})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(SettingsPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/budget\",element:/*#__PURE__*/_jsx(BudgetPage,{})})]})})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useMemo","Routes","Route","useLocation","useDispatch","useSelector","Box","ThemeProvider","CssBaseline","MainLayout","Dashboard","ComponentView","SettingsPage","BudgetPage","connectWebSocket","setComponents","createDarkTheme","createLightTheme","jsx","_jsx","jsxs","_jsxs","App","dispatch","location","connectionStatus","state","websocket","status","settings","theme","headerColor","footerColor","backgroundColor","sidebarColor","paperColor","textPrimaryColor","textSecondaryColor","componentsThemeColor","socket","on","data","disconnect","componentIframes","document","querySelectorAll","forEach","iframe","contentWindow","postMessage","type","colors","children","sx","display","height","path","element"],"sources":["/Users/cskoons/projects/github/Tekton/Hephaestus/src/src/App.js"],"sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport { Routes, Route, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Box, ThemeProvider, CssBaseline } from '@mui/material';\nimport MainLayout from './components/layouts/MainLayout';\nimport Dashboard from './pages/Dashboard';\nimport ComponentView from './pages/ComponentView';\nimport SettingsPage from './pages/SettingsPage';\nimport BudgetPage from './pages/BudgetPage';\nimport { connectWebSocket } from './services/websocketService';\nimport { setComponents } from './store/slices/componentsSlice';\nimport { createDarkTheme } from './themes/darkTheme';\nimport { createLightTheme } from './themes/lightTheme';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const connectionStatus = useSelector(state => state.websocket.status);\n  const settings = useSelector(state => state.settings);\n\n  // Create dynamic theme based on user settings\n  const theme = useMemo(() => {\n    if (settings.theme === 'light') {\n      return createLightTheme(settings);\n    }\n    return createDarkTheme(settings);\n  }, [\n    settings.theme,\n    settings.headerColor,\n    settings.footerColor,\n    settings.backgroundColor,\n    settings.sidebarColor,\n    settings.paperColor,\n    settings.textPrimaryColor,\n    settings.textSecondaryColor,\n    settings.componentsThemeColor\n  ]);\n\n  useEffect(() => {\n    // Connect to WebSocket server\n    const socket = connectWebSocket();\n\n    // Listen for component list updates\n    socket.on('component_list', (data) => {\n      dispatch(setComponents(data));\n    });\n\n    return () => {\n      // Disconnect WebSocket when component unmounts\n      socket.disconnect();\n    };\n  }, [dispatch]);\n\n  // Apply component GUI theme by sending a message to component iframes\n  useEffect(() => {\n    const componentIframes = document.querySelectorAll('iframe[src^=\"/component\"]');\n    componentIframes.forEach(iframe => {\n      if (iframe.contentWindow) {\n        iframe.contentWindow.postMessage({\n          type: 'TEKTON_THEME_UPDATE',\n          theme: settings.theme,\n          colors: {\n            headerColor: settings.headerColor,\n            footerColor: settings.footerColor,\n            backgroundColor: settings.backgroundColor,\n            componentsThemeColor: settings.componentsThemeColor,\n            textPrimaryColor: settings.textPrimaryColor,\n            textSecondaryColor: settings.textSecondaryColor,\n          }\n        }, '*');\n      }\n    });\n  }, [\n    settings.theme,\n    settings.headerColor,\n    settings.footerColor,\n    settings.backgroundColor,\n    settings.componentsThemeColor,\n    settings.textPrimaryColor,\n    settings.textSecondaryColor\n  ]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Box sx={{ display: 'flex', height: '100vh' }}>\n        <MainLayout>\n          <Routes>\n            <Route path=\"/\" element={<Dashboard />} />\n            <Route path=\"/component/:id\" element={<ComponentView />} />\n            <Route path=\"/settings\" element={<SettingsPage />} />\n            <Route path=\"/budget\" element={<BudgetPage />} />\n          </Routes>\n        </MainLayout>\n      </Box>\n    </ThemeProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}