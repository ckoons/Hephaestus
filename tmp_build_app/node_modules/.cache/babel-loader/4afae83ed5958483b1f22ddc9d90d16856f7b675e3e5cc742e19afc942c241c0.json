{"ast":null,"code":"import React from'react';import{useSelector}from'react-redux';import{Box,Paper,Typography,Avatar,Chip,useTheme}from'@mui/material';import ReactMarkdown from'react-markdown';import{Prism as SyntaxHighlighter}from'react-syntax-highlighter';import{atomDark}from'react-syntax-highlighter/dist/esm/styles/prism';import PersonIcon from'@mui/icons-material/Person';import{getComponentIcon,getComponentColor}from'../../utils/componentUtils';// Custom markdown components for code syntax highlighting\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const components={code(_ref){let{node,inline,className,children,...props}=_ref;const match=/language-(\\w+)/.exec(className||'');return!inline&&match?/*#__PURE__*/_jsx(SyntaxHighlighter,{style:atomDark,language:match[1],PreTag:\"div\",...props,children:String(children).replace(/\\n$/,'')}):/*#__PURE__*/_jsx(\"code\",{className:className,...props,children:children});}};const ChatMessage=_ref2=>{var _message$metadata;let{message}=_ref2;const theme=useTheme();const components=useSelector(state=>state.components.list);// Get component data if message is from a component\nconst component=message.componentId?components.find(c=>c.id===message.componentId):null;const isUser=message.sender==='user';// Format timestamp\nconst formattedTime=new Date(message.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});// Get component color\nconst componentColor=component?getComponentColor(component.name):theme.palette.primary.main;return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:isUser?'row-reverse':'row',mb:2,px:2},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:isUser?'primary.main':componentColor,width:40,height:40,mr:isUser?0:1.5,ml:isUser?1.5:0},children:isUser?/*#__PURE__*/_jsx(PersonIcon,{}):component?getComponentIcon(component.name):null}),/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:'70%'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',mb:0.5,flexDirection:isUser?'row-reverse':'row'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",sx:{fontWeight:'bold'},children:isUser?'You':component?component.name:'Tekton'}),((_message$metadata=message.metadata)===null||_message$metadata===void 0?void 0:_message$metadata.modelType)&&!isUser&&/*#__PURE__*/_jsx(Chip,{label:message.metadata.modelType,size:\"small\",sx:{ml:isUser?0:1,mr:isUser?1:0,height:20,fontSize:'0.7rem'}}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:{color:'text.secondary',ml:isUser?0:1,mr:isUser?1:0},children:formattedTime})]}),/*#__PURE__*/_jsx(Paper,{elevation:1,sx:{p:2,borderRadius:2,bgcolor:isUser?'primary.dark':theme.palette.background.paper,borderColor:isUser?'primary.main':componentColor,borderLeft:!isUser?`4px solid ${componentColor}`:'none',borderRight:isUser?`4px solid ${theme.palette.primary.main}`:'none'},children:message.content.includes('```')?/*#__PURE__*/_jsx(ReactMarkdown,{components:components,children:message.content}):/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{whiteSpace:'pre-wrap'},children:message.content})})]})]});};export default ChatMessage;","map":{"version":3,"names":["React","useSelector","Box","Paper","Typography","Avatar","Chip","useTheme","ReactMarkdown","Prism","SyntaxHighlighter","atomDark","PersonIcon","getComponentIcon","getComponentColor","jsx","_jsx","jsxs","_jsxs","components","code","_ref","node","inline","className","children","props","match","exec","style","language","PreTag","String","replace","ChatMessage","_ref2","_message$metadata","message","theme","state","list","component","componentId","find","c","id","isUser","sender","formattedTime","Date","timestamp","toLocaleTimeString","hour","minute","componentColor","name","palette","primary","main","sx","display","flexDirection","mb","px","bgcolor","width","height","mr","ml","maxWidth","alignItems","variant","fontWeight","metadata","modelType","label","size","fontSize","color","elevation","p","borderRadius","background","paper","borderColor","borderLeft","borderRight","content","includes","whiteSpace"],"sources":["/Users/cskoons/projects/github/Tekton/Hephaestus/src/src/components/chat/ChatMessage.js"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  Box,\n  Paper,\n  Typography,\n  Avatar,\n  Chip,\n  useTheme,\n} from '@mui/material';\nimport ReactMarkdown from 'react-markdown';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { atomDark } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport PersonIcon from '@mui/icons-material/Person';\n\nimport { getComponentIcon, getComponentColor } from '../../utils/componentUtils';\n\n// Custom markdown components for code syntax highlighting\nconst components = {\n  code({ node, inline, className, children, ...props }) {\n    const match = /language-(\\w+)/.exec(className || '');\n    return !inline && match ? (\n      <SyntaxHighlighter\n        style={atomDark}\n        language={match[1]}\n        PreTag=\"div\"\n        {...props}\n      >\n        {String(children).replace(/\\n$/, '')}\n      </SyntaxHighlighter>\n    ) : (\n      <code className={className} {...props}>\n        {children}\n      </code>\n    );\n  },\n};\n\nconst ChatMessage = ({ message }) => {\n  const theme = useTheme();\n  const components = useSelector(state => state.components.list);\n  \n  // Get component data if message is from a component\n  const component = message.componentId \n    ? components.find(c => c.id === message.componentId) \n    : null;\n  \n  const isUser = message.sender === 'user';\n  \n  // Format timestamp\n  const formattedTime = new Date(message.timestamp).toLocaleTimeString([], {\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n  \n  // Get component color\n  const componentColor = component \n    ? getComponentColor(component.name)\n    : theme.palette.primary.main;\n  \n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: isUser ? 'row-reverse' : 'row',\n        mb: 2,\n        px: 2,\n      }}\n    >\n      {/* Avatar */}\n      <Avatar\n        sx={{\n          bgcolor: isUser ? 'primary.main' : componentColor,\n          width: 40,\n          height: 40,\n          mr: isUser ? 0 : 1.5,\n          ml: isUser ? 1.5 : 0,\n        }}\n      >\n        {isUser ? (\n          <PersonIcon />\n        ) : (\n          component ? getComponentIcon(component.name) : null\n        )}\n      </Avatar>\n      \n      {/* Message content */}\n      <Box sx={{ maxWidth: '70%' }}>\n        {/* Header with name and time */}\n        <Box\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            mb: 0.5,\n            flexDirection: isUser ? 'row-reverse' : 'row',\n          }}\n        >\n          <Typography variant=\"subtitle2\" sx={{ fontWeight: 'bold' }}>\n            {isUser ? 'You' : (component ? component.name : 'Tekton')}\n          </Typography>\n          \n          {message.metadata?.modelType && !isUser && (\n            <Chip\n              label={message.metadata.modelType}\n              size=\"small\"\n              sx={{\n                ml: isUser ? 0 : 1,\n                mr: isUser ? 1 : 0,\n                height: 20,\n                fontSize: '0.7rem',\n              }}\n            />\n          )}\n          \n          <Typography\n            variant=\"caption\"\n            sx={{\n              color: 'text.secondary',\n              ml: isUser ? 0 : 1,\n              mr: isUser ? 1 : 0,\n            }}\n          >\n            {formattedTime}\n          </Typography>\n        </Box>\n        \n        {/* Message bubble */}\n        <Paper\n          elevation={1}\n          sx={{\n            p: 2,\n            borderRadius: 2,\n            bgcolor: isUser ? 'primary.dark' : theme.palette.background.paper,\n            borderColor: isUser ? 'primary.main' : componentColor,\n            borderLeft: !isUser ? `4px solid ${componentColor}` : 'none',\n            borderRight: isUser ? `4px solid ${theme.palette.primary.main}` : 'none',\n          }}\n        >\n          {message.content.includes('```') ? (\n            <ReactMarkdown components={components}>\n              {message.content}\n            </ReactMarkdown>\n          ) : (\n            <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-wrap' }}>\n              {message.content}\n            </Typography>\n          )}\n        </Paper>\n      </Box>\n    </Box>\n  );\n};\n\nexport default ChatMessage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}